### **Project: Prompt Builder VS Code Extension**

#### **Overview**
This project is a custom Visual Studio Code extension designed to assist developers and content creators in building sophisticated prompts for AI services (like ChatGPT) by combining written instructions with context extracted from their codebase. It includes features for selecting project files, calculating token sizes, saving reusable prompts, and copying the final prompt to the clipboard.

The extension is ideal for users who need to construct prompts with code context and manage them efficiently for external AI tools.

---

#### **Key Features**
1. **Prompt Editor**:
   - Provides a dedicated area for writing and editing prompts.
   - Supports context injection from selected files in the project.

2. **File Context Integration**:
   - Allows browsing the file structure of your project.
   - Enables the selection of specific files or folders.
   - Includes a depth control to limit the inclusion of files in nested directories.

3. **Prompt Library**:
   - A reusable prompt library where users can save prompts for later use.
   - Enables quick loading of frequently used or previously built prompts.

4. **Token Counting**:
   - Dynamically calculates the total token size of the current prompt and context.
   - Helps ensure compatibility with external AI tools that have token limits.

5. **Copy to Clipboard**:
   - Generates the final prompt with a `Context` section that includes file paths and content.
   - Easily copies the entire prompt to the clipboard for use in external services.

---

#### **How It Works**
1. **Prompt Writing**:
   - Type your main prompt into the provided editor.

2. **File Selection**:
   - Browse your workspace's file structure using a collapsible file tree.
   - Select files or folders to include in the prompt as context.

3. **Token Calculation**:
   - Automatically updates token counts as you add files or modify the prompt.

4. **Final Prompt Generation**:
   - Combines your prompt with the selected files under a `Context` section.
   - Provides a clean, formatted output for AI services.

5. **Saving and Reusing Prompts**:
   - Save prompts along with their configurations (selected files, depth settings, etc.) for future use.

---

#### **Project Structure**
```
my-prompt-extension/
├─ src/
│  ├─ extension.ts             # Entry point for the extension
│  ├─ webview/
│  │  ├─ panel.ts              # Webview panel logic
│  │  ├─ ui.html               # HTML for the webview interface
│  │  ├─ messageTypes.ts       # Types for messages exchanged between the webview and the extension
│  │  ├─ tokenCounter.ts       # Utility for token counting and security (nonce generation)
│  │  └─ promptLibrary.ts      # Functions for retrieving file content and managing file trees
├─ package.json                # Extension metadata and dependencies
├─ tsconfig.json               # TypeScript configuration
├─ .gitignore                  # Files and folders to exclude from version control
├─ README.md                   # Documentation for the extension
```

---

#### **Prompt Format**
The final prompt generated by the extension follows this structure:
```
[Prompt Start]

<Your main prompt content here>

[Context]

- File: <file-path>
  Content:
  <file content here>

- File: <file-path>
  Content:
  <file content here>

[End of Context]

[Token Count: 1234 tokens]
```

---

#### **Installation and Setup**
1. Clone the repository:
   ```
   git clone https://github.com/your-repo/my-prompt-extension.git
   cd my-prompt-extension
   ```
2. Install dependencies:
   ```
   npm install
   ```
3. Compile the project:
   ```
   npm run compile
   ```
4. Launch the extension:
   - Open the project in VS Code.
   - Run the command **"Tasks: Run Task"** and select `npm: watch`.
   - Press **F5** to start debugging the extension in a new VS Code window.

---

#### **Usage**
1. Open the command palette (`Ctrl+Shift+P` or `Cmd+Shift+P`) and run **"Open Prompt Panel"**.
2. Write your main prompt in the editor.
3. Browse and select files to include as context using the file tree.
4. Adjust the depth setting to control how deeply nested files are included.
5. Review the token count and context details in the sidebar.
6. Save prompts to the library for reuse or copy the final prompt to your clipboard.
